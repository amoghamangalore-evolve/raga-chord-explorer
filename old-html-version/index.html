<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raga Chord Explorer - Indian Classical Music Harmony</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Top Navigation Bar -->
    <nav class="top-nav">
        <div class="nav-left">
            <div class="logo">Logo</div>
        </div>
        <div class="nav-right">
            <button id="theme-toggle" class="nav-pill" title="Toggle Theme">
                <i class="fas fa-adjust"></i>
                <span class="nav-pill-text">Theme</span>
            </button>
            <button id="faq-btn" class="nav-pill" title="Frequently Asked Questions">
                <i class="fas fa-circle-question"></i>
                <span class="nav-pill-text">FAQ</span>
            </button>
            <button id="chat-assist-btn" class="nav-pill" title="AI Chat Assistant">
                <i class="fas fa-comments"></i>
                <span class="nav-pill-text">Chat</span>
            </button>
            <button id="settings-btn" class="nav-pill" title="Settings">
                <i class="fas fa-gear"></i>
                <span class="nav-pill-text">Settings</span>
            </button>
        </div>
    </nav>

    <!-- Main Layout with Sidebar -->
    <div class="app-layout">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-top">
                <button class="sidebar-btn active" data-tab="chords">
                    <span>Chord<br>explorer</span>
                </button>
                <button class="sidebar-btn" data-tab="find-scale">
                    <span>Find scale</span>
                </button>
                <button class="sidebar-btn" data-tab="about">
                    <span>About</span>
                </button>
            </div>
            <div class="sidebar-middle">
                <div class="sidebar-label">Main Menu</div>
            </div>
            <div class="sidebar-bottom">
                <button class="sidebar-btn sidebar-btn-profile">
                    <span>Profile -<br>logged in</span>
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">

            <!-- Controls Header Bar -->
            <div class="controls-header">
                <div class="control-item">
                    <div class="control-title">Tradition -</div>
                    <div class="control-subtitle">Hindustani/Carnatic</div>
                    <select class="control-select" data-tradition>
                        <option value="hindustani">Hindustani</option>
                        <option value="carnatic">Carnatic</option>
                    </select>
                </div>
                <div class="control-item">
                    <div class="control-title">Select Raga -</div>
                    <div class="control-subtitle">Dropdown</div>
                    <select id="raga-select" class="control-select">
                        <option value="">Choose a raga...</option>
                    </select>
                </div>
                <div class="control-item">
                    <div class="control-title">Scale -</div>
                    <div class="control-subtitle">dropdown (C,D..)</div>
                    <select id="tonic-select" class="control-select">
                        <option value="C">C</option>
                        <option value="C#">C#/Db</option>
                        <option value="D">D</option>
                        <option value="D#">D#/Eb</option>
                        <option value="E">E</option>
                        <option value="F">F</option>
                        <option value="F#">F#/Gb</option>
                        <option value="G">G</option>
                        <option value="G#">G#/Ab</option>
                        <option value="A">A</option>
                        <option value="A#">A#/Bb</option>
                        <option value="B">B</option>
                    </select>
                </div>
                <div class="control-item">
                    <div class="control-title">Piano/ Pad</div>
                    <div class="control-subtitle">sound dropdown select</div>
                    <select class="control-select">
                        <option>Piano</option>
                        <option>Pad</option>
                    </select>
                </div>
                <div class="control-item">
                    <div class="control-title">Drone</div>
                    <div class="control-subtitle">- enable</div>
                    <label class="control-checkbox">
                        <input type="checkbox" id="drone-enabled" checked>
                    </label>
                </div>
                <div class="control-item">
                    <div class="control-title">Metronome -</div>
                    <div class="control-subtitle">tempo selector</div>
                    <input type="number" class="control-input" value="120" min="60" max="200">
                </div>
            </div>

            <!-- Interactive Notes Panel -->
            <div class="notes-panel" id="notes-panel">
                <div class="notes-panel-title">Raga Notes - Click to explore chords</div>
                <div class="notes-grid" id="notes-grid">
                    <div class="empty-state">Select a raga to see its notes</div>
                </div>
            </div>

            <!-- Chord Progression Panel -->
            <div class="content-panel">
                <h3 class="panel-title">Chord Progression</h3>
                <div id="chord-progression-panel" class="chord-progression-display">
                    <div class="empty-state">Chord progressions will appear here based on the selected raga</div>
                </div>
            </div>

            <!-- Additional Color Chords Panel -->
            <div class="content-panel">
                <h3 class="panel-title">Colors - Additional Suggested Chords</h3>
                <div id="color-chords-panel" class="color-chords-display">
                    <div class="empty-state">Additional chord suggestions will appear here</div>
                </div>
            </div>

            <!-- Virtual Keyboard Panel -->
            <div class="content-panel keyboard-panel">
                <h3 class="panel-title">Virtual Keyboard</h3>
                <p class="panel-subtitle">Highlights notes used in the scale. Click notes to see related chords.</p>
                <div id="virtual-keyboard" class="virtual-keyboard">
                    <!-- Keyboard will be generated dynamically -->
                </div>
                <div id="keyboard-chord-suggestions" class="keyboard-suggestions hidden">
                    <h4>Related Chords:</h4>
                    <div id="related-chords-list"></div>
                </div>
            </div>

        <!-- Tab: Chords (Default Active) -->
        <div class="tab-content active" id="chords-tab">
            <div class="raga-info" id="raga-info" style="display: none;">
                <h3 class="raga-title" id="raga-name"></h3>
                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-label">Parent</div>
                        <div class="info-value" id="raga-parent"></div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Aroha (Ascending)</div>
                        <div class="info-value" id="raga-aroha"></div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Avaroha (Descending)</div>
                        <div class="info-value" id="raga-avaroha"></div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Vadi (Principal)</div>
                        <div class="info-value" id="raga-vadi"></div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Samvadi (Secondary)</div>
                        <div class="info-value" id="raga-samvadi"></div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Drone</div>
                        <div class="info-value" id="raga-drone"></div>
                    </div>
                </div>
                <div class="raga-notes" id="raga-notes"></div>
            </div>

            <div class="tabs">
                <button class="tab-btn active" data-tab="chords">Chords</button>
                <button class="tab-btn" data-tab="phrases">Phrases</button>
                <button class="tab-btn" data-tab="metronome">Metronome</button>
                <button class="tab-btn" data-tab="about">About</button>
            </div>

            <div class="tab-content active" id="chords-tab-inner">
            <div class="filter-section">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="strong">‚úÖ Strong</button>
                <button class="filter-btn" data-filter="drone">üé∂ Drone</button>
                <button class="filter-btn" data-filter="color">‚ú® Color</button>
            </div>
            <div id="chords-grid" class="chords-grid">
                <div class="empty-state">
                    <p>Select a raga to see available chords</p>
                </div>
            </div>
        </div>

        <div class="tab-content" id="phrases-tab">
            <div id="phrases-content">
                <div class="empty-state">
                    <p>Select a raga to see characteristic phrases (pakad/chalan)</p>
                </div>
            </div>
        </div>

        <!-- Find Scale Tab (YouTube Chord Detection) -->
        <div class="tab-content" id="find-scale-tab">
            <div class="find-scale-container">
                <h2 class="section-title">YouTube Chord Detection</h2>
                <p class="section-description">Paste a YouTube link to analyze and detect chords from the audio</p>

                <div class="youtube-input-section">
                    <div class="input-group">
                        <label for="youtube-url">YouTube URL</label>
                        <input
                            type="text"
                            id="youtube-url"
                            class="youtube-input"
                            placeholder="https://www.youtube.com/watch?v=..."
                        />
                    </div>
                    <button id="analyze-btn" class="btn-analyze">
                        <i class="fas fa-waveform-lines"></i>
                        Analyze & Detect Chords
                    </button>
                </div>

                <div id="analysis-status" class="analysis-status hidden">
                    <div class="status-spinner"></div>
                    <p>Analyzing audio and detecting chords...</p>
                </div>

                <div id="chord-results" class="chord-results hidden">
                    <h3>Detected Chords</h3>
                    <div id="detected-chords-list" class="detected-chords-list"></div>

                    <h3>Chord Progression</h3>
                    <div id="chord-progression" class="chord-progression"></div>

                    <h3>Suggested Ragas</h3>
                    <div id="suggested-ragas" class="suggested-ragas"></div>
                </div>

                <div class="feature-note">
                    <i class="fas fa-info-circle"></i>
                    <p><strong>Note:</strong> Chord detection uses advanced audio analysis. Results may vary based on audio quality and complexity. For best results, use clear instrumental or acoustic recordings.</p>
                </div>
            </div>
        </div>

        <div class="tab-content" id="metronome-tab">
            <div class="metronome-container">
                <div class="metronome-display">
                    <div class="tempo-value" id="tempo-display">120</div>
                    <div class="tempo-label">BPM</div>
                </div>
                <div class="metronome-controls">
                    <input type="range" id="tempo-slider" min="100" max="160" value="120" class="tempo-slider">
                    <div class="tempo-markers">
                        <span>100</span>
                        <span>130</span>
                        <span>160</span>
                    </div>
                </div>
                <div class="metronome-buttons">
                    <button id="metronome-start" class="btn-metronome btn-start">Start</button>
                    <button id="metronome-stop" class="btn-metronome btn-stop" disabled>Stop</button>
                </div>
                <div class="beat-indicator" id="beat-indicator">
                    <div class="beat-dot"></div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="about-tab">
            <div class="about-content">
                <h3>About Raga Chord Explorer</h3>
                <p>This tool generates harmonic chord palettes that respect the melodic constraints of Indian classical ragas. While harmony is not traditional in Hindustani or Carnatic music, this explorer helps modern composers, arrangers, and fusion musicians discover chord voicings that:</p>
                <ul>
                    <li>Use only the swaras (notes) allowed in each raga</li>
                    <li>Emphasize Vadi and Samvadi (principal and secondary notes)</li>
                    <li>Respect aroha/avaroha (ascending/descending) patterns</li>
                    <li>Work with traditional drone (tanpura) accompaniment</li>
                </ul>
                <h4>How to Use</h4>
                <ol>
                    <li>Choose Hindustani or Carnatic tradition</li>
                    <li>Select a raga from the dropdown</li>
                    <li>Set your tonic (Sa) reference pitch</li>
                    <li>Explore generated chords - click to hear them with drone</li>
                    <li>Toggle Fusion Mode to include Western dominant chords</li>
                </ol>
                <h4>Chord Tags</h4>
                <ul>
                    <li><strong>‚úÖ Strong:</strong> Contains Sa + Vadi or Samvadi</li>
                    <li><strong>üé∂ Drone:</strong> Works well with Sa-Pa or Sa-Ma drone</li>
                    <li><strong>‚ú® Color:</strong> Sus, add9, or other extended voicings</li>
                </ul>
                <div class="disclaimer">
                    <p>‚ö†Ô∏è This is a fusion/modern tool. Traditional raga performance is purely melodic. Use this for film music, fusion, and contemporary arrangements while respecting the classical tradition.</p>
                </div>
            </div>
        </div>

        </main>
    </div>

    <!-- FAQ Modal -->
    <div id="faq-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-circle-question"></i> Frequently Asked Questions</h2>
                <button class="modal-close" data-modal="faq-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="faq-item">
                    <h3>What is a raga?</h3>
                    <p>A raga is a melodic framework in Indian classical music that defines specific notes, their relationships, and characteristic phrases. Each raga has its own mood, time of day, and emotional character.</p>
                </div>
                <div class="faq-item">
                    <h3>Can I use these chords in traditional raga performance?</h3>
                    <p>No. Traditional Hindustani and Carnatic music are purely melodic. This tool is designed for fusion, film music, and modern arrangements that blend Western harmony with Indian melodic principles.</p>
                </div>
                <div class="faq-item">
                    <h3>What's the difference between Hindustani and Carnatic?</h3>
                    <p>Hindustani music is the North Indian classical tradition, while Carnatic is from South India. They share common roots but have different ragas, notation systems, and performance styles.</p>
                </div>
                <div class="faq-item">
                    <h3>How do I download MIDI files?</h3>
                    <p>Click the download icon (‚Üì) on any chord card to save it as a MIDI file. You can then import it into your DAW or music notation software.</p>
                </div>
                <div class="faq-item">
                    <h3>What does "Fusion Mode" do?</h3>
                    <p>Fusion Mode includes Western dominant 7th chords and other harmonic extensions that aren't strictly within the raga but can work in modern fusion contexts.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Assistant Modal -->
    <div id="chat-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2><i class="fas fa-comments"></i> AI Chat Assistant</h2>
                <button class="modal-close" data-modal="chat-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="chat-container">
                    <div class="chat-messages" id="chat-messages">
                        <div class="chat-message assistant-message">
                            <i class="fas fa-robot"></i>
                            <div class="message-content">
                                <p>Hello! I'm your Raga Chord Explorer assistant. I can help you with:</p>
                                <ul>
                                    <li>Understanding raga theory and structure</li>
                                    <li>Suggestions for chord progressions</li>
                                    <li>Explaining chord voicings and their roles</li>
                                    <li>Guidance on fusion music composition</li>
                                </ul>
                                <p>What would you like to know?</p>
                            </div>
                        </div>
                    </div>
                    <div class="chat-input-area">
                        <input type="text" id="chat-input" placeholder="Ask me anything about ragas and chords..." />
                        <button id="chat-send-btn" class="chat-send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                    <p class="chat-disclaimer">Note: This is a placeholder UI. Connect to your preferred AI service for full functionality.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-gear"></i> Settings</h2>
                <button class="modal-close" data-modal="settings-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3>Audio Settings</h3>
                    <div class="setting-item">
                        <label for="volume-slider">Master Volume</label>
                        <input type="range" id="volume-slider" min="0" max="100" value="70" class="setting-slider">
                        <span id="volume-value">70%</span>
                    </div>
                    <div class="setting-item">
                        <label for="drone-volume">Drone Volume</label>
                        <input type="range" id="drone-volume" min="0" max="100" value="50" class="setting-slider">
                        <span id="drone-volume-value">50%</span>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Display Preferences</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="show-sargam" checked>
                            Show Sargam notation
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="show-western" checked>
                            Show Western note names
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="animations" checked>
                            Enable animations
                        </label>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Advanced</h3>
                    <div class="setting-item">
                        <label for="chord-duration">Chord Playback Duration</label>
                        <select id="chord-duration" class="select">
                            <option value="1">1 second</option>
                            <option value="2" selected>2 seconds</option>
                            <option value="3">3 seconds</option>
                            <option value="4">4 seconds</option>
                        </select>
                    </div>
                </div>
                <div class="settings-actions">
                    <button id="reset-settings" class="btn-secondary">Reset to Defaults</button>
                    <button id="save-settings" class="btn-primary">Save Settings</button>
                </div>
            </div>
        </div>
    </div>

    <script src="ragas.js"></script>
    <script src="audio.js"></script>
    <script src="midi.js"></script>
    <script src="chord-explorer.js"></script>
    <script src="chord-detection.js"></script>
    <script src="app.js"></script>
</body>
</html>
